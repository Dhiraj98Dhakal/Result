<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Student Result Portal - Check Result</title>
<link rel="shortcut icon" href="icon.jpg" type="image/x-icon">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* {margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
body{background:#f4f6f9;min-height:100vh;display:flex;flex-direction:column;}
header{background:#1e3c72;color:#fff;padding:20px;text-align:center;}
nav{background:#162447;display:flex;justify-content:center;gap:30px;padding:10px;}
nav a{color:#fff;text-decoration:none;font-weight:bold;}
nav a:hover{text-decoration:underline;}
main{flex:1;padding:30px;}
.result-box{max-width:700px;margin:auto;background:#fff;padding:25px;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,0.15);}
.result-box h2{text-align:center;margin-bottom:20px;color:#1e3c72;}
input, button{width:100%;padding:10px;margin-bottom:15px;border-radius:5px;border:1px solid #ccc;}
button{background:#1e3c72;color:#fff;border:none;font-size:16px;cursor:pointer;}
button:hover{background:#16315c;}
table{width:100%;border-collapse:collapse;margin-top:20px;}
th,td{border:1px solid #ccc;padding:8px;text-align:center;}
th{background:#1e3c72;color:white;}
footer{background:#162447;color:#fff;text-align:center;padding:12px;}
</style>
</head>
<body>

<header>
  <h1>Laxmi Secondary School</h1>
  <p>Online Result Portal</p>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="checkresult.html">Check Result</a>
  <a href="admin.html">Admin Panel</a>
</nav>

<main>

<section class="result-box">
  <h2>Check Your Result</h2>
  <input type="number" id="roll" placeholder="Enter Roll Number">
  <button onclick="checkResult()">View Result</button>
  <div id="output"></div>
</section>

</main>

<footer>Â© 2026 Student Result Portal | All Rights Reserved</footer>

<script>
// Load data from localStorage
let students = JSON.parse(localStorage.getItem('students')) || [];

function checkResult(){
  const rollInput = document.getElementById("roll").value.trim();
  if(!rollInput){ 
    document.getElementById("output").innerHTML = "<p>Please enter Roll Number.</p>"; 
    return;
  }
  
  const roll = rollInput; // keep as string
  const output = document.getElementById("output");

  // find student by roll number
  const student = students.find(s => String(s.roll) === String(roll));

  if(!student){
    output.innerHTML="<p>Result not found.</p>"; 
    return; 
  }

  // check overall status
  const status = student.subjects.every(sub => Number(sub.obtain) >= Number(sub.pass)) ? "PASS" : "FAIL";

  // render all subjects in a spreadsheet-like table
  let subjectsHtml = student.subjects.map(sub => 
    `<tr>
      <td>${student.roll}</td>
      <td>${student.name}</td>
      <td>${sub.subject}</td>
      <td>${sub.full}</td>
      <td>${sub.pass}</td>
      <td>${sub.obtain}</td>
      <td>${sub.result}</td>
    </tr>`
  ).join("");

  output.innerHTML = `
    <table>
      <thead>
        <tr>
          <th>Roll No</th>
          <th>Name</th>
          <th>Subject</th>
          <th>Full Marks</th>
          <th>Pass Marks</th>
          <th>Obtained Marks</th>
          <th>Pass/Fail</th>
        </tr>
      </thead>
      <tbody>
        ${subjectsHtml}
        <tr>
          <th colspan="5">Total Marks</th>
          <td colspan="2">${student.subjects.reduce((sum, s)=>sum+Number(s.obtain),0)} / ${student.subjects.reduce((sum,s)=>sum+Number(s.full),0)}</td>
        </tr>
        <tr>
          <th colspan="5">Status</th>
          <td colspan="2"><b>${status}</b></td>
        </tr>
      </tbody>
    </table>
  `;

  // Play audio
  if(status==="PASS"){
    let audio = new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
    audio.play();
    output.innerHTML += "<p style='color:green;font-weight:bold;'>ðŸŽ‰ Congratulations! You Passed!</p>";
  } else {
    let audio = new Audio("https://actions.google.com/sounds/v1/cartoon/slide_whistle_to_drum_hit.ogg");
    audio.play();
    output.innerHTML += "<p style='color:red;font-weight:bold;'>ðŸ˜¢ Oh shit! You Failed!</p>";
  }
}

</script>

</body>
</html>
